"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"default",{enumerable:true,get:function(){return _default}});const _app=require("@galaxar/app");const _utils=require("@galaxar/utils");const _default={stage:_app.Feature.PLUGIN,load_:(app,routes)=>{app.on("after:"+_app.Feature.PLUGIN,()=>(0,_utils.batchAsync_)(routes,async(routersConfig,route)=>{if((0,_utils.isPlainObject)(routersConfig)){return(0,_utils.batchAsync_)(routersConfig,async(options,type)=>{let loader_=require("../routers/"+type).default;app.log("verbose",`A "${type}" router is created at "${route}" in app [${app.name}].`);console.log(type,loader_);return loader_(app,route,options)})}else{let mainRoute="/",baseRoute=route;let pos=route.indexOf(":/");if(pos!==-1){mainRoute=route.substring(0,pos+2);baseRoute=route.substring(pos+1)}else if(Array.isArray(routersConfig)){mainRoute="all:/"}let rules={[mainRoute]:routersConfig};const loader_=require("../routers/rule").default;app.log("verbose",`A "rule" router is created at "${baseRoute}" in app [${app.name}].`);return loader_(app,baseRoute,{rules:rules})}}))}};
//# sourceMappingURL=routing.js.map