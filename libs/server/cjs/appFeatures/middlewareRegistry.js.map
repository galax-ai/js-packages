{"version":3,"sources":["../../lib/appFeatures/middlewareRegistry.js"],"sourcesContent":["/**\n * Enable middleware registry, to register middleware for later use.\n * @module Feature_MiddlewareRegistry\n *\n * @example\n *   \"middlewareRegistry\": {\n *       \"middleware1\": { // options\n *               ...\n *           },\n *           \"middleware2\": { // options\n *               ...\n *           }\n *       },\n *   },\n */\n\nimport { _, isPlainObject } from '@galaxar/utils';\nimport { Feature } from '@galaxar/app';\nimport { InvalidConfiguration } from '@galaxar/types';\n\nexport default {\n    /**\n     * This feature is loaded at init stage\n     * @member {string}\n     */\n    stage: Feature.INIT,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} middlewares - Object factories\n     * @returns {Promise.<*>}\n     */\n    load_: (app, middlewares) => {\n        _.each(middlewares, (options, name) => {\n            \n\n            this.registerMiddlewareFactory(text.baseName(file), require(file))\n        });\n    },\n};\n"],"names":["stage","Feature","INIT","load_","app","middlewares","_","each","options","name","registerMiddlewareFactory","text","baseName","file","require"],"mappings":"oGAoBA,iDAAA,iCAJiC,qCACT,qCACa,wBAErC,SAAe,CAKXA,MAAOC,YAAO,CAACC,IAAI,CAQnBC,MAAO,CAACC,IAAKC,cAAgB,CACzBC,QAAC,CAACC,IAAI,CAACF,YAAa,CAACG,QAASC,OAAS,CAGnC,CAAA,KAAA,CAAG,EAAEC,yBAAyB,CAACC,KAAKC,QAAQ,CAACC,MAAOC,QAAQD,MAChE,EACJ,CACJ"}