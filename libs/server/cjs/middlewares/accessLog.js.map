{"version":3,"sources":["../../lib/middlewares/accessLog.js"],"sourcesContent":["/**\n * Add access log for every http request\n * @module Middleware_AccessLog\n */\n\nmodule.exports = (opt, app) => {\n    const pinoHttp = app.tryRequire('pino-http');\n\n    app.requireFeatures(['logger'], 'accessLog');\n\n    const log = pinoHttp({ quietReqLogger: true, ...opt, logger: app.logger });\n\n    return (ctx, next) => {\n        log(ctx.req, ctx.res);\n        ctx.log = ctx.request.log = ctx.response.log = ctx.req.log;\n        return next();\n    };\n};\n"],"names":["module","exports","opt","app","pinoHttp","tryRequire","requireFeatures","log","quietReqLogger","logger","ctx","next","req","res","request","response"],"mappings":"AAAA;;;CAGC;AAEDA,OAAOC,OAAO,GAAG,CAACC,KAAKC,MAAQ;IAC3B,MAAMC,WAAWD,IAAIE,UAAU,CAAC;IAEhCF,IAAIG,eAAe,CAAC;QAAC;KAAS,EAAE;IAEhC,MAAMC,MAAMH,SAAS;QAAEI,gBAAgB,IAAI;QAAE,GAAGN,GAAG;QAAEO,QAAQN,IAAIM,MAAM;IAAC;IAExE,OAAO,CAACC,KAAKC,OAAS;QAClBJ,IAAIG,IAAIE,GAAG,EAAEF,IAAIG,GAAG;QACpBH,IAAIH,GAAG,GAAGG,IAAII,OAAO,CAACP,GAAG,GAAGG,IAAIK,QAAQ,CAACR,GAAG,GAAGG,IAAIE,GAAG,CAACL,GAAG;QAC1D,OAAOI;IACX;AACJ"}