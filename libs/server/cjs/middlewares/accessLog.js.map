{"version":3,"sources":["../../lib/middlewares/accessLog.js"],"sourcesContent":["/**\n * Add access log for every http request\n * @module Middleware_AccessLog\n */\n\nimport http from 'node:http';\nimport { InvalidConfiguration } from \"@galaxar/types\";\n\nmodule.exports = (opt, app) => {        \n    const pinoHttp = app.tryRequire('pino-http')\n\n    app.requireFeatures([ 'logger' ], 'accessLog');    \n\n    const log = pinoHttp({ quietReqLogger: true, logger: app.logger  });\n\n    return (ctx, next) => {\n        log(ctx.req, ctx.res);\n        return next();\n    };\n};"],"names":["module","exports","opt","app","pinoHttp","tryRequire","requireFeatures","log","quietReqLogger","logger","ctx","next","req","res"],"mappings":"uHAKiB,mCACoB,sGAErCA,OAAOC,OAAO,CAAG,CAACC,IAAKC,MAAQ,CAC3B,MAAMC,SAAWD,IAAIE,UAAU,CAAC,aAEhCF,IAAIG,eAAe,CAAC,CAAE,SAAU,CAAE,aAElC,MAAMC,IAAMH,SAAS,CAAEI,eAAgB,IAAI,CAAEC,OAAQN,IAAIM,MAAM,AAAE,GAEjE,MAAO,CAACC,IAAKC,OAAS,CAClBJ,IAAIG,IAAIE,GAAG,CAAEF,IAAIG,GAAG,EACpB,OAAOF,MACX,CACJ"}