{"version":3,"sources":["../../lib/middlewares/accessLog.js"],"sourcesContent":["/**\n * Add access log for every http request\n * @module Middleware_AccessLog\n */\n\nmodule.exports = (opt, app) => {\n    const pinoHttp = app.tryRequire('pino-http');\n\n    app.requireFeatures(['logger'], 'accessLog');\n\n    const log = pinoHttp({ quietReqLogger: true, ...opt, logger: app.logger });\n\n    return (ctx, next) => {\n        log(ctx.req, ctx.res);\n        ctx.log = ctx.request.log = ctx.response.log = ctx.req.log;\n        return next();\n    };\n};\n"],"names":["module","exports","opt","app","pinoHttp","tryRequire","requireFeatures","log","quietReqLogger","logger","ctx","next","req","res","request","response"],"mappings":"YAKAA,CAAAA,OAAOC,OAAO,CAAG,CAACC,IAAKC,MAAQ,CAC3B,MAAMC,SAAWD,IAAIE,UAAU,CAAC,aAEhCF,IAAIG,eAAe,CAAC,CAAC,SAAS,CAAE,aAEhC,MAAMC,IAAMH,SAAS,CAAEI,eAAgB,IAAI,CAAE,GAAGN,GAAG,CAAEO,OAAQN,IAAIM,MAAM,AAAC,GAExE,MAAO,CAACC,IAAKC,OAAS,CAClBJ,IAAIG,IAAIE,GAAG,CAAEF,IAAIG,GAAG,CACpBH,CAAAA,IAAIH,GAAG,CAAGG,IAAII,OAAO,CAACP,GAAG,CAAGG,IAAIK,QAAQ,CAACR,GAAG,CAAGG,IAAIE,GAAG,CAACL,GAAG,CAC1D,OAAOI,MACX,CACJ"}