{"version":3,"sources":["../../lib/middlewares/ip.js"],"sourcesContent":["\nconst IPV4_PREFIX = '::ffff:';\n\nconst ip = (options, app) => {\n    const requestIp = app.tryRequire('request-ip');\n\n    return async (ctx, next) => {   \n        let ip = requestIp.getClientIp(ctx.req);\n\n        if (ip.startsWith(IPV4_PREFIX)) {\n            ip = ip.substring(IPV4_PREFIX.length);\n        }\n\n        ctx.request.ip = ip;               \n\n        return next();\n    };\n};\n\nexport default ip;"],"names":["IPV4_PREFIX","ip","options","app","requestIp","tryRequire","ctx","next","getClientIp","req","startsWith","substring","length","request"],"mappings":"oGAmBA,iDAAA,YAlBA,MAAMA,YAAc,UAEpB,MAAMC,GAAK,CAACC,QAASC,MAAQ,CACzB,MAAMC,UAAYD,IAAIE,UAAU,CAAC,cAEjC,OAAO,MAAOC,IAAKC,OAAS,CACxB,IAAIN,GAAKG,UAAUI,WAAW,CAACF,IAAIG,GAAG,EAEtC,GAAIR,GAAGS,UAAU,CAACV,aAAc,CAC5BC,GAAKA,GAAGU,SAAS,CAACX,YAAYY,MAAM,CACxC,CAAC,AAEDN,IAAIO,OAAO,CAACZ,EAAE,CAAGA,GAEjB,OAAOM,MACX,CACJ,QAEA,SAAeN"}