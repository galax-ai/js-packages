{"version":3,"sources":["../../lib/middlewares/passportAuth.js"],"sourcesContent":["import { InvalidConfiguration } from '@galaxar/types';\n\n/**\n * Passport initialization middleware, required to initialize Passport service.\n * @module Middleware_PassportAuth\n */\n\n/**\n * Create a passport authentication middleware.\n * @param {object} opt - Passport options\n * @property {string} opt.strategy - Passport strategy\n * @property {object} [opt.options] - Passport strategy options\n * @param {Routable} app\n * @returns {KoaActionFunction}\n */\nconst passportAuth = (opt, app) => {\n    if (!opt || !opt.strategy) {\n        throw new InvalidConfiguration('Missing strategy name.', app, 'middlewares.passportAuth.strategy');\n    }\n\n    let passportService = app.getService('passport');\n\n    if (!passportService) {\n        throw new InvalidConfiguration('Passport feature is not enabled.', app, 'passport');\n    }\n\n    return passportService.authenticate(opt.strategy, opt.options);\n};\n\nexport default passportAuth;\n"],"names":["passportAuth","opt","app","strategy","InvalidConfiguration","passportService","getService","authenticate","options"],"mappings":";;;;+BA6BA;;;eAAA;;;uBA7BqC;AAErC;;;CAGC,GAED;;;;;;;CAOC,GACD,MAAMA,eAAe,CAACC,KAAKC,MAAQ;IAC/B,IAAI,CAACD,OAAO,CAACA,IAAIE,QAAQ,EAAE;QACvB,MAAM,IAAIC,2BAAoB,CAAC,0BAA0BF,KAAK,qCAAqC;IACvG,CAAC;IAED,IAAIG,kBAAkBH,IAAII,UAAU,CAAC;IAErC,IAAI,CAACD,iBAAiB;QAClB,MAAM,IAAID,2BAAoB,CAAC,oCAAoCF,KAAK,YAAY;IACxF,CAAC;IAED,OAAOG,gBAAgBE,YAAY,CAACN,IAAIE,QAAQ,EAAEF,IAAIO,OAAO;AACjE;MAEA,WAAeR"}