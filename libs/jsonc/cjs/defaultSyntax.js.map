{"version":3,"sources":["../lib/defaultSyntax.js"],"sourcesContent":["import { _ } from '@galaxar/utils';\n\nconst PROCESSOR_PREFIX = '#!';\n\n// syntax: <PROCESSOR_PREFIX><TOKEN>:\n\nconst JS_VALUE_TOKEN = 'jsv';\nconst ES6_TEMPLATE_TOKEN = 'es6';\nconst JS_SWIG_TOKEN = 'swig';\nconst FN_TOKEN = 'fn';\n\nconst esTemplateSetting = {\n    interpolate: /\\$\\{([\\s\\S]+?)\\}/g,\n};\n\nconst swigTemplateSetting = {\n    interpolate: /{{([\\s\\S]+?)}}/g,\n};\n\nconst processors = {\n    [JS_VALUE_TOKEN]: (str, variables) => {\n        // eslint-disable-next-line no-new-func\n        return new Function('v', 'with (v) { return (' + str + ')}')(variables);\n    },\n    [ES6_TEMPLATE_TOKEN]: (str, variables) => {\n        str = str.trim();\n        if (str) {\n            return _.template(str, esTemplateSetting)(variables);\n        }\n\n        return str;\n    },\n    [JS_SWIG_TOKEN]: (str, variables) => {\n        str = str.trim();\n        if (str) {\n            return _.template(str, swigTemplateSetting)(variables);\n        }\n\n        return str;\n    },\n    [FN_TOKEN]: (str) => {\n        // eslint-disable-next-line no-new-func\n        return new Function('v', `with (v) { ${str} }`);\n    },\n};\n\nexport default {\n    prefix: PROCESSOR_PREFIX,\n    processors,\n};\n"],"names":["PROCESSOR_PREFIX","JS_VALUE_TOKEN","ES6_TEMPLATE_TOKEN","JS_SWIG_TOKEN","FN_TOKEN","esTemplateSetting","interpolate","swigTemplateSetting","processors","str","variables","Function","trim","_","template","prefix"],"mappings":"oGA8CA,iDAAA,iCA9CkB,kBAElB,MAAMA,iBAAmB,KAIzB,MAAMC,eAAiB,MACvB,MAAMC,mBAAqB,MAC3B,MAAMC,cAAgB,OACtB,MAAMC,SAAW,KAEjB,MAAMC,kBAAoB,CACtBC,YAAa,mBACjB,EAEA,MAAMC,oBAAsB,CACxBD,YAAa,iBACjB,EAEA,MAAME,WAAa,CACf,CAACP,eAAe,CAAE,CAACQ,IAAKC,YAAc,CAElC,OAAO,IAAIC,SAAS,IAAK,sBAAwBF,IAAM,MAAMC,UACjE,EACA,CAACR,mBAAmB,CAAE,CAACO,IAAKC,YAAc,CACtCD,IAAMA,IAAIG,IAAI,GACd,GAAIH,IAAK,CACL,OAAOI,QAAC,CAACC,QAAQ,CAACL,IAAKJ,mBAAmBK,UAC9C,CAAC,AAED,OAAOD,GACX,EACA,CAACN,cAAc,CAAE,CAACM,IAAKC,YAAc,CACjCD,IAAMA,IAAIG,IAAI,GACd,GAAIH,IAAK,CACL,OAAOI,QAAC,CAACC,QAAQ,CAACL,IAAKF,qBAAqBG,UAChD,CAAC,AAED,OAAOD,GACX,EACA,CAACL,SAAS,CAAE,AAACK,KAAQ,CAEjB,OAAO,IAAIE,SAAS,IAAK,CAAC,WAAW,EAAEF,IAAI,EAAE,CAAC,CAClD,CACJ,QAEA,SAAe,CACXM,OAAQf,iBACRQ,UACJ"}