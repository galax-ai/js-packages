{"version":3,"sources":["../lib/binary.js"],"sourcesContent":["import { ValidationError } from './errors';\n\nclass T_BINARY {\n    name = 'binary';\n    alias = ['blob', 'buffer'];\n    primitive = true;\n    defaultValue = null;\n\n    constructor(system) {\n        this.system = system;\n    }\n\n    validate(value) {\n        return value instanceof Buffer;\n    }\n\n    _sanitize(value, meta, opts) {\n        if (value instanceof Buffer) {\n            return value;\n        }\n    \n        if (typeof value === 'string') {\n            return Buffer.from(value, meta.encoding || 'base64');\n        }\n    \n        throw new ValidationError('Invalid binary value.', {\n            value,\n            meta,\n            ...opts\n        });\n    }\n\n    serialize(value, meta) {\n        return (value == null ? null : value.toString(meta.encoding || 'base64'));\n    }\n};\n\nexport default T_BINARY;"],"names":["T_BINARY","validate","value","Buffer","_sanitize","meta","opts","from","encoding","ValidationError","serialize","toString","constructor","system","name","alias","primitive","defaultValue"],"mappings":";;;;+BAqCA;;;eAAA;;;wBArCgC;;;;;;;;;;;;;;AAEhC,MAAMA;IAUFC,SAASC,KAAK,EAAE;QACZ,OAAOA,iBAAiBC;IAC5B;IAEAC,UAAUF,KAAK,EAAEG,IAAI,EAAEC,IAAI,EAAE;QACzB,IAAIJ,iBAAiBC,QAAQ;YACzB,OAAOD;QACX,CAAC;QAED,IAAI,OAAOA,UAAU,UAAU;YAC3B,OAAOC,OAAOI,IAAI,CAACL,OAAOG,KAAKG,QAAQ,IAAI;QAC/C,CAAC;QAED,MAAM,IAAIC,uBAAe,CAAC,yBAAyB;YAC/CP;YACAG;YACA,GAAGC,IAAI;QACX,GAAG;IACP;IAEAI,UAAUR,KAAK,EAAEG,IAAI,EAAE;QACnB,OAAQH,SAAS,IAAI,GAAG,IAAI,GAAGA,MAAMS,QAAQ,CAACN,KAAKG,QAAQ,IAAI,SAAS;IAC5E;IA1BAI,YAAYC,MAAM,CAAE;QALpBC,uBAAAA,QAAO;QACPC,uBAAAA,SAAQ;YAAC;YAAQ;SAAS;QAC1BC,uBAAAA,aAAY,IAAI;QAChBC,uBAAAA,gBAAe,IAAI;QAGf,IAAI,CAACJ,MAAM,GAAGA;IAClB;AAyBJ;;MAEA,WAAeb"}