{"version":3,"sources":["../../errors/AppErrors.js"],"sourcesContent":["import HttpCode from './HttpCode';\n\n/**\n * App errors.\n * @module AppErrors\n */\n\n/**\n * General errors with error info, http status and error code.\n * @class\n * @extends Error\n */\nexport class GeneralError extends Error {\n    constructor(message, info, status, code) {\n        super(message);\n\n        this.name = this.constructor.name;\n        let typeOfInfo = typeof info;\n        let typeOfStatus = typeof status;\n        let typeOfCode = typeof code;\n\n        if (typeOfCode === 'undefined') {\n            if (typeOfStatus === 'string') {\n                code = status;\n                status = undefined;\n                typeOfStatus = 'undefined';\n            }\n        }\n\n        if (typeOfStatus === 'undefined') {\n            if (typeOfInfo === 'number') {\n                status = info;\n                info = undefined;\n            }\n\n            if (typeOfCode === 'undefined' && typeOfInfo === 'string') {\n                code = info;\n                info = undefined;\n            }\n        }\n\n        /**\n         * Error information\n         * @member {object}\n         */\n        this.info = info;\n\n        /**\n         * Http status\n         * @member {number}\n         */\n        this.status = status;\n\n        /**\n         * Error code\n         * @member {string}\n         */\n        this.code = code;\n    }\n}\n\n/**\n * Application errors.\n * @class\n * @extends GeneralError\n */\nexport class ApplicationError extends GeneralError {\n    /**\n     * @param {string} message - Error message\n     * @param {*} info\n     * @param {*} code\n     */\n    constructor(message, info, code) {\n        super(message, info, HttpCode.INTERNAL_SERVER_ERROR, code || 'E_APP');\n    }\n}\n\n/**\n * Error caused by invalid configuration.\n * @class\n * @extends ApplicationError\n */\nexport class InvalidConfiguration extends ApplicationError {\n    /**\n     * @param {string} message - Error message\n     * @param {App} [app] - The related app module\n     * @param {string} [item] - The related config item\n     */\n    constructor(message, app, item) {\n        super(message, { app: app.name, item }, 'E_INVALID_CONF');\n    }\n}\n\n/**\n * Error caused by invalid function argument. Not suitable for http request, which should use BadRequest\n * @class\n * @extends InvalidArgument\n */\nexport class InvalidArgument extends ApplicationError {\n    /**\n     * @param {string} message - Error message\n     * @param {*} [info] - Extra info\n     * @param {string} [item] - The related config item\n     */\n    constructor(message, info) {\n        super(message, info, 'E_INVALID_ARG');\n    }\n}\n\n/**\n * Error which will expose the detailed error message to end-users.\n */\nexport class ExposableError extends GeneralError {\n    expose = true;\n}\n"],"names":["GeneralError","ApplicationError","InvalidConfiguration","InvalidArgument","ExposableError","Error","constructor","message","info","status","code","name","typeOfInfo","typeOfStatus","typeOfCode","undefined","HttpCode","INTERNAL_SERVER_ERROR","app","item","expose"],"mappings":"2MAYaA,YAAY,mBAAZA,cAsDAC,gBAAgB,mBAAhBA,kBAgBAC,oBAAoB,mBAApBA,sBAgBAC,eAAe,mBAAfA,iBAcAC,cAAc,mBAAdA,mEAhHQ,uRAYd,MAAMJ,qBAAqBK,MAC9BC,YAAYC,OAAO,CAAEC,IAAI,CAAEC,MAAM,CAAEC,IAAI,CAAE,CACrC,KAAK,CAACH,QAEN,CAAA,IAAI,CAACI,IAAI,CAAG,IAAI,CAACL,WAAW,CAACK,IAAI,CACjC,IAAIC,WAAa,OAAOJ,KACxB,IAAIK,aAAe,OAAOJ,OAC1B,IAAIK,WAAa,OAAOJ,KAExB,GAAII,aAAe,YAAa,CAC5B,GAAID,eAAiB,SAAU,CAC3BH,KAAOD,OACPA,OAASM,UACTF,aAAe,WACnB,CAAC,AACL,CAAC,AAED,GAAIA,eAAiB,YAAa,CAC9B,GAAID,aAAe,SAAU,CACzBH,OAASD,KACTA,KAAOO,SACX,CAAC,AAED,GAAID,aAAe,aAAeF,aAAe,SAAU,CACvDF,KAAOF,KACPA,KAAOO,SACX,CAAC,AACL,CAAC,AAMD,IAAI,CAACP,IAAI,CAAGA,IAMZ,CAAA,IAAI,CAACC,MAAM,CAAGA,MAMd,CAAA,IAAI,CAACC,IAAI,CAAGA,IAChB,CACJ,CAOO,MAAMT,yBAAyBD,aAMlCM,YAAYC,OAAO,CAAEC,IAAI,CAAEE,IAAI,CAAE,CAC7B,KAAK,CAACH,QAASC,KAAMQ,iBAAQ,CAACC,qBAAqB,CAAEP,MAAQ,QACjE,CACJ,CAOO,MAAMR,6BAA6BD,iBAMtCK,YAAYC,OAAO,CAAEW,GAAG,CAAEC,IAAI,CAAE,CAC5B,KAAK,CAACZ,QAAS,CAAEW,IAAKA,IAAIP,IAAI,CAAEQ,IAAK,EAAG,iBAC5C,CACJ,CAOO,MAAMhB,wBAAwBF,iBAMjCK,YAAYC,OAAO,CAAEC,IAAI,CAAE,CACvB,KAAK,CAACD,QAASC,KAAM,gBACzB,CACJ,CAKO,MAAMJ,uBAAuBJ,iDAChCoB,sBAAAA,SAAS,IAAI,EACjB"}