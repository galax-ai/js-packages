{"version":3,"sources":["../../src/utils/download_.js"],"sourcesContent":["import request from \"superagent\";\n\nconst download_ = async (app, url, saveToPath) => {\n    const dirName = path.dirname(saveToPath);\n    await fs.ensureDir(dirName);\n\n    const stream = fs.createWriteStream(saveToPath);\n\n    return new Promise((resolve, reject) => {\n        stream.on('close', () => {\n            resolve();\n            app.log('info', `Downloaded ${url}`);\n        });\n\n        stream.on('error', (err) => {\n            reject(err);\n        });\n\n        request.get(url).pipe(stream);\n    });\n};\n\nexport default download_;"],"names":["download_","app","url","saveToPath","dirName","path","dirname","fs","ensureDir","stream","createWriteStream","Promise","resolve","reject","on","log","err","request","get","pipe"],"mappings":";;;;+BAsBA;;;eAAA;;;mEAtBoB;;;;;;AAEpB,MAAMA,YAAY,OAAOC,KAAKC,KAAKC,aAAe;IAC9C,MAAMC,UAAUC,KAAKC,OAAO,CAACH;IAC7B,MAAMI,GAAGC,SAAS,CAACJ;IAEnB,MAAMK,SAASF,GAAGG,iBAAiB,CAACP;IAEpC,OAAO,IAAIQ,QAAQ,CAACC,SAASC,SAAW;QACpCJ,OAAOK,EAAE,CAAC,SAAS,IAAM;YACrBF;YACAX,IAAIc,GAAG,CAAC,QAAQ,CAAC,WAAW,EAAEb,IAAI,CAAC;QACvC;QAEAO,OAAOK,EAAE,CAAC,SAAS,CAACE,MAAQ;YACxBH,OAAOG;QACX;QAEAC,mBAAO,CAACC,GAAG,CAAChB,KAAKiB,IAAI,CAACV;IAC1B;AACJ;MAEA,WAAeT"}