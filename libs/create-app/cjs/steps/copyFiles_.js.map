{"version":3,"sources":["../../src/steps/copyFiles_.js"],"sourcesContent":["import path from \"node:path\";\nimport { fs } from \"@galaxar/sys\";\nimport { _, batchAsync_ } from \"@galaxar/utils\";\nimport { glob } from 'glob';\n\nasync function copyFiles_(app, templatePath, targetPath, skipOverriding) {\n    const files = await glob(\"**/*.*\", { cwd: templatePath, dot: true });\n    await batchAsync_(files, async (relativePath) => {\n        let sourceFile = path.join(templatePath, relativePath);\n        let destFile = path.join(targetPath, relativePath);\n\n        const ls = await fs.lstat(sourceFile);\n        if (ls.isDirectory()) {\n            await fs.ensureDir(destFile);\n            return;\n        }\n\n        if (skipOverriding && fs.existsSync(destFile)) {\n            app.log('info', `Skipped existing ${relativePath}`);       \n            return;\n        }\n\n        await fs.ensureFile(destFile);\n        await fs.copyFile(sourceFile, destFile);\n        app.log('info', `Copied ${relativePath}`);       \n    });\n};\n\nexport default copyFiles_;\n"],"names":["copyFiles_","app","templatePath","targetPath","skipOverriding","files","glob","cwd","dot","batchAsync_","relativePath","sourceFile","path","join","destFile","ls","fs","lstat","isDirectory","ensureDir","existsSync","log","ensureFile","copyFile"],"mappings":";;;;+BA4BA;;;eAAA;;;iEA5BiB;qBACE;uBACY;sBACV;;;;;;AAErB,eAAeA,WAAWC,GAAG,EAAEC,YAAY,EAAEC,UAAU,EAAEC,cAAc,EAAE;IACrE,MAAMC,QAAQ,MAAMC,IAAAA,UAAI,EAAC,UAAU;QAAEC,KAAKL;QAAcM,KAAK,IAAI;IAAC;IAClE,MAAMC,IAAAA,kBAAW,EAACJ,OAAO,OAAOK,eAAiB;QAC7C,IAAIC,aAAaC,iBAAI,CAACC,IAAI,CAACX,cAAcQ;QACzC,IAAII,WAAWF,iBAAI,CAACC,IAAI,CAACV,YAAYO;QAErC,MAAMK,KAAK,MAAMC,OAAE,CAACC,KAAK,CAACN;QAC1B,IAAII,GAAGG,WAAW,IAAI;YAClB,MAAMF,OAAE,CAACG,SAAS,CAACL;YACnB;QACJ,CAAC;QAED,IAAIV,kBAAkBY,OAAE,CAACI,UAAU,CAACN,WAAW;YAC3Cb,IAAIoB,GAAG,CAAC,QAAQ,CAAC,iBAAiB,EAAEX,aAAa,CAAC;YAClD;QACJ,CAAC;QAED,MAAMM,OAAE,CAACM,UAAU,CAACR;QACpB,MAAME,OAAE,CAACO,QAAQ,CAACZ,YAAYG;QAC9Bb,IAAIoB,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAEX,aAAa,CAAC;IAC5C;AACJ;;MAEA,WAAeV"}