{"version":3,"sources":["../../lib/starters/loopWorker.js"],"sourcesContent":["const { sleep_ } = require('@genx/july');\nconst startWorker = require('./worker');\n\n/**\n * \n * @param {Function} worker \n * @param {object} options \n * @property {integer} [options.interval=1000]\n */\nasync function startLoopWorker(worker, options) {\n    let { interval, ...workerOptions } = options;\n\n    if (typeof interval === 'undefined') {\n        interval = 1000;\n    }\n\n    return startWorker(async (app) => {             \n        while (true) {\n            await worker(app);\n            await sleep_(interval);\n        }            \n    }, workerOptions);\n}\n\nmodule.exports = startLoopWorker;"],"names":["sleep_","require","startWorker","startLoopWorker","worker","options","interval","workerOptions","app","module","exports"],"mappings":"aAAA,KAAM,CAAEA,MAAM,CAAE,CAAGC,QAAQ,cAC3B,MAAMC,YAAcD,QAAQ,YAQ5B,eAAeE,gBAAgBC,MAAM,CAAEC,OAAO,CAAE,CAC5C,GAAI,CAAEC,QAAQ,CAAE,GAAGC,cAAe,CAAGF,QAErC,GAAI,OAAOC,WAAa,YAAa,CACjCA,SAAW,GACf,CAAC,AAED,OAAOJ,YAAY,MAAOM,KAAQ,CAC9B,MAAO,IAAI,CAAE,CACT,MAAMJ,OAAOI,IACb,OAAMR,OAAOM,SACjB,CACJ,EAAGC,cACP,CAEAE,OAAOC,OAAO,CAAGP"}