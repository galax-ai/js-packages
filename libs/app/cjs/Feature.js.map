{"version":3,"sources":["../lib/Feature.js"],"sourcesContent":["import { InvalidConfiguration, Types } from '@galaxar/types';\n\n/**\n * Feature loading stage\n */\nconst Feature = {\n    /**\n     * Configuration, for loading config or overriding config\n     */\n    CONF: 'Config',\n    /**\n     * Initialization, e.g. settings\n     */\n    INIT: 'Initial',\n    /**\n     * Services, e.g. loggers, i18n\n     */\n    SERVICE: 'Services',\n    /**\n     * Loading plugins, e.g. middlewares, bootstrap\n     */\n    PLUGIN: 'Plugins',\n    /**\n     * Final preparation before service container get into work\n     */\n    FINAL: 'Final',\n};\n\n/**\n * Validate a feature object.\n * @param {object} featureObject - Feature object\n * @property {string} featureObject.type - Feature loading stage\n * @property {function} featureObject.load_ - Feature loading method\n * @returns {bool}\n */\nexport const validate = (featureObject) => {\n    return featureObject && featureObject.hasOwnProperty('stage') && typeof featureObject.load_ === 'function';\n};\n\nexport const config = (app, options, typeInfo, featureName) => {\n    try {\n        return Types.sanitize(options, { type: 'object', ...typeInfo }, undefined, featureName);\n    } catch (err) {\n        throw new InvalidConfiguration(err.message, app, { feature: featureName });\n    }\n};\n\nexport default Feature;\n"],"names":["validate","config","Feature","CONF","INIT","SERVICE","PLUGIN","FINAL","featureObject","hasOwnProperty","load_","app","options","typeInfo","featureName","Types","sanitize","type","undefined","err","InvalidConfiguration","message","feature"],"mappings":"2MAmCaA,QAAQ,mBAARA,UAIAC,MAAM,mBAANA,QAQb,OAAuB,mBAAvB,iCA/C4C,kBAK5C,MAAMC,QAAU,CAIZC,KAAM,SAINC,KAAM,UAINC,QAAS,WAITC,OAAQ,UAIRC,MAAO,OACX,EASO,MAAMP,SAAW,AAACQ,eAAkB,CACvC,OAAOA,eAAiBA,cAAcC,cAAc,CAAC,UAAY,OAAOD,cAAcE,KAAK,GAAK,UACpG,EAEO,MAAMT,OAAS,CAACU,IAAKC,QAASC,SAAUC,cAAgB,CAC3D,GAAI,CACA,OAAOC,YAAK,CAACC,QAAQ,CAACJ,QAAS,CAAEK,KAAM,SAAU,GAAGJ,QAAQ,AAAC,EAAGK,UAAWJ,YAC/E,CAAE,MAAOK,IAAK,CACV,MAAM,IAAIC,2BAAoB,CAACD,IAAIE,OAAO,CAAEV,IAAK,CAAEW,QAASR,WAAY,EAAG,AAC/E,CACJ,QAEA,SAAeZ"}