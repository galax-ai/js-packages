{"version":3,"sources":["../src/supertest.js"],"sourcesContent":["const { URL } = require('node:url');\nimport supertest from 'supertest';\n\nconst supertestAdapter = () => {\n    const agent = supertest;\n\n    const agentWrapper = {\n        createRequest(httpMethod, url) {\n            let testUrl = url;\n\n            if (url.startsWith('http://') || url.startsWith('https://')) {\n                const urlObj = new URL(url);\n\n                testUrl = urlObj.pathname;\n                if (urlObj.hash) {\n                    testUrl += '#' + urlObj.hash;\n                }\n            }\n\n            if (!agentWrapper.server) {\n                throw new Error('\"server\" of the agent is required before sending test request.');\n            }\n\n            return agent(agentWrapper.server)[httpMethod](testUrl);\n        },\n    };\n\n    return agentWrapper;\n};\n\nexport default supertestAdapter;\n"],"names":["URL","require","supertestAdapter","agent","supertest","agentWrapper","createRequest","httpMethod","url","testUrl","startsWith","urlObj","pathname","hash","server","Error"],"mappings":";;;;+BA8BA;;;eAAA;;;kEA7BsB;;;;;;AADtB,MAAM,EAAEA,IAAG,EAAE,GAAGC,QAAQ;AAGxB,MAAMC,mBAAmB,IAAM;IAC3B,MAAMC,QAAQC,kBAAS;IAEvB,MAAMC,eAAe;QACjBC,eAAcC,UAAU,EAAEC,GAAG,EAAE;YAC3B,IAAIC,UAAUD;YAEd,IAAIA,IAAIE,UAAU,CAAC,cAAcF,IAAIE,UAAU,CAAC,aAAa;gBACzD,MAAMC,SAAS,IAAIX,IAAIQ;gBAEvBC,UAAUE,OAAOC,QAAQ;gBACzB,IAAID,OAAOE,IAAI,EAAE;oBACbJ,WAAW,MAAME,OAAOE,IAAI;gBAChC,CAAC;YACL,CAAC;YAED,IAAI,CAACR,aAAaS,MAAM,EAAE;gBACtB,MAAM,IAAIC,MAAM,kEAAkE;YACtF,CAAC;YAED,OAAOZ,MAAME,aAAaS,MAAM,CAAC,CAACP,WAAW,CAACE;QAClD;IACJ;IAEA,OAAOJ;AACX;MAEA,WAAeH"}