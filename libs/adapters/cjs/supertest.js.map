{"version":3,"sources":["../src/supertest.js"],"sourcesContent":["const { URL } = require('node:url');\nimport supertest from 'supertest';\n\nconst supertestAdapter = () => {\n    const agent = supertest;\n\n    return {\n        createRequest(client, httpMethod, url) {\n            let testUrl = url;\n\n            if (url.startsWith('http://') || url.startsWith('https://')) {\n                const urlObj = new URL(url);\n\n                testUrl = urlObj.pathname;\n                if (urlObj.hash) {\n                    testUrl += '#' + urlObj.hash;\n                }\n            }\n\n            if (!client.server) {\n                throw new Error('\"server\" is required before sending test request.');\n            }\n\n            return agent(client.server)[httpMethod](testUrl);\n        },\n    };\n};\n\nexport default supertestAdapter;\n"],"names":["URL","require","supertestAdapter","agent","supertest","createRequest","client","httpMethod","url","testUrl","startsWith","urlObj","pathname","hash","server","Error"],"mappings":";;;;+BA4BA;;;eAAA;;;kEA3BsB;;;;;;AADtB,MAAM,EAAEA,IAAG,EAAE,GAAGC,QAAQ;AAGxB,MAAMC,mBAAmB,IAAM;IAC3B,MAAMC,QAAQC,kBAAS;IAEvB,OAAO;QACHC,eAAcC,MAAM,EAAEC,UAAU,EAAEC,GAAG,EAAE;YACnC,IAAIC,UAAUD;YAEd,IAAIA,IAAIE,UAAU,CAAC,cAAcF,IAAIE,UAAU,CAAC,aAAa;gBACzD,MAAMC,SAAS,IAAIX,IAAIQ;gBAEvBC,UAAUE,OAAOC,QAAQ;gBACzB,IAAID,OAAOE,IAAI,EAAE;oBACbJ,WAAW,MAAME,OAAOE,IAAI;gBAChC,CAAC;YACL,CAAC;YAED,IAAI,CAACP,OAAOQ,MAAM,EAAE;gBAChB,MAAM,IAAIC,MAAM,qDAAqD;YACzE,CAAC;YAED,OAAOZ,MAAMG,OAAOQ,MAAM,CAAC,CAACP,WAAW,CAACE;QAC5C;IACJ;AACJ;MAEA,WAAeP"}